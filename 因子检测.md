## 1. IC与IR

[*知乎链接*](https://zhuanlan.zhihu.com/p/38189394)

- **IC:信息系数(Information Coefficient,简称 IC)**，代表因子预测股票收益的能力。IC的计算方法是：计算**全部股票**在调仓周期**期初排名**和调仓周期**期末收益排名**的**线性相关度(Correlation)**。IC越大的因子，选股能力就越强。
- **IR:信息比率(Information Ratio,简称IR)= IC的多周期均值/IC的标准方差**，代表因子获取稳定Alpha的能力。整个回测时段由多个调仓周期组成，每一个周期都会计算出一个不同的IC值，IR等于多个调仓周期的IC均值除以这些IC的标准方差。所以IR兼顾了因子的选股能力（由IC代表）和因子选股能力的稳定性（由IC的标准方差的倒数代表）。
- factor ~ Return，排序相关性，spearman
- window=21，最近21天的IC值
- 多画几个做曲线的包

## 2. 因子暴露

[*链接*](https://bigquant.com/wiki/doc/yinzi-FactorsandFactorExposures-rgUurX36Lj)

- 因子暴露就是**股票在因子所代表的特征上的取值**，比如一个股票的P/E 为15.9，那么它对P/E 因子的因子暴露就是15.9。

## 3. 单因子检测

[*b站链接*](https://www.bilibili.com/video/BV17a411W75e/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&vd_source=4a32918993b7731e0295c3056a0364b9)

[*知乎链接*](https://zhuanlan.zhihu.com/p/46274316)

### 3.1 流程

1. 因子构建
2. 剔除上市未满一年公司以及ST股
3. 因子自相关分析
4. 因子行业分析
5. 因子中性化
6. 分层效应【分层+多空、TopN组合】
7. ICIR【分层IC、累计IC、IC衰减】
8. T检验

### 3.2 因子构建

1. 选择研究的股票池
2. 获取对应基本分时数据、财务数据
3. 可以用TaLib用分时数据来合成所需要的技术面因子
4. 注意研究的频率

### 3.3 剔除上市未满一年公司以及ST股

1. 获取公司上市日期
2. 基于上市日信息加365天
3. 对比交易日日期和上市日期
4. 剔除上市未满一年的公司

### 3.4因子相关性分析

因子的自相关性主要反映因子整体的稳定性，或者说因子的动量特征，如果因子的正自相关性很高，说明这个因子的持续性会很好，强者恒强，可以合理预期组合的换手会很低，负相关性很高则反之。

### 3.5 ADF检验

和计量有关，检验数据的稳定性。

缩尾处理。

### 3.6 行业分析

因子的行业分析可以直观的看到哪些行业的因子暴露比较高，集中度比较高，更进一步可以预期构建的组合会倾向于哪些行业，从行业层面分析因子有效的逻辑。这部分直接算每个行业的因子暴露均值和因子暴露标准化均值，即均值除以标准差，这样可以反映整个行业因子暴露的一致性，即集中度。

### 3.7 因子中性化

因子中性化主要是为了剔除因子在行业和市值上的特异性，让因子在行业和市值上可比。每个行业的因子大小和稳定性是有明显差异的，所以如果直接构建组合，结果会明显集中于部分行业。有时除了这两个之外，也会考虑更多因素，做一些风格中性化，或正交化。

中性化的原理为用因子值对市值和行业虚拟变量做回归，取回归的残差，因为回归残差和自变量之间是相互正交的。另外也可以证明，对行业虚拟变量回归去残差和在行业内减均值除以标准差的效果是一样的。

### 3.8 分层效应

将因子在不同组别各自检验，分层。

以分层效应作图。分层明显，有序列地上升下降表示可取。

分层效应帮助我们判断因子的单调性好不好，因子映射到各自组别的收益率的时候是否有顺序的排列。

### 3.9 IC IR检测

IC看的是相关性的高低，IC衰减看的是相关性的稳定性，如果衰减很慢，那么说明这个因子很稳定，可以做的比较长期一点，如果衰减很快，比较适合做短线。

因子衰减一般看IC的半衰期，首先计算因子值和未来一期、两期、三期等等的IC值（显然是越往后相关性越低的），这里不累计，半衰期定义为IC值衰减到一半所用的时间。这部分通过函数getHalfValue、plotHalfIC和calhalfic实现。

一般量价因子都衰减很快，财务类的比较慢。